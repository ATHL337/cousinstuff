{{ define "main" }}
  <div class="recipe-hero">
    <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap; align-items:flex-start;">
      <div>
        <h1 class="sr-only">{{ .Title }}</h1>
        {{ partial "vault_placard.html" . }}
		{{ partial "rads-badge.html" . }}

        <div class="meta">
          {{ with .Params.servings }}<span>{{ . }} servings</span>{{ end }}

          {{ with .Params.prepTime }}
            <span>Prep: {{ partial "duration_label.html" . }}</span>
          {{ end }}

          {{ with .Params.totalTime }}
            <span>Total: {{ partial "duration_label.html" . }}</span>
          {{ end }}
        </div>

        {{ with .Params.tags }}
          <div class="chips">
            {{ range . }}
              <a class="chip" href="/tags/{{ . | urlize }}/">{{ . }}</a>
            {{ end }}
          </div>
        {{ end }}
      </div>

      <div class="no-print" style="display:flex; gap:10px;">
        <button class="accent" type="button" onclick="window.print()">Print</button>
        <a class="btn secondary" href="/recipes/">Back</a>
      </div>
    </div>

    {{/* HERO image: always use .Params.image if set */}}
    {{ with .Params.image }}
      <img
        class="recipe-photo"
        alt="{{ $.Title }} image"
        src="{{ . | relURL }}"
        loading="lazy"
        decoding="async"
      />
    {{ end }}

    <div class="card">
      {{/* Preferred structured rendering (for Mealie + consistency) */}}
      {{ if or .Params.recipeIngredient .Params.recipeInstructions }}

        {{ with .Params.recipeIngredient }}
          <h2>Ingredients</h2>
          <ul>
            {{ range . }}
              <li>{{ . }}</li>
            {{ end }}
          </ul>
        {{ end }}

        {{ with .Params.recipeInstructions }}
          <h2>Instructions</h2>
          <ol>
            {{ range . }}
              <li>{{ . }}</li>
            {{ end }}
          </ol>
        {{ end }}

        {{/* Optional: keep extra notes/sections in markdown body */}}
        {{ if .Content }}
          <hr />
          {{ .Content }}
        {{ end }}

      {{ else }}
        {{/* Legacy pages */}}
        {{ .Content }}
      {{ end }}
    </div>
  </div>
{{ end }}

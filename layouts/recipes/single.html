{{ define "main" }}
  <div class="recipe-hero">
    <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap; align-items:flex-start;">
      <div>
        <h1 class="sr-only">{{ .Title }}</h1>
        {{ partial "vault_placard.html" . }}

        <div class="meta">
          {{ with .Params.servings }}<span>{{ . }} servings</span>{{ end }}

          {{ with .Params.prepTime }}
            <span>Prep: {{ partial "duration_label.html" . }}</span>
          {{ end }}

          {{ with .Params.totalTime }}
            <span>Total: {{ partial "duration_label.html" . }}</span>
          {{ end }}
        </div>

        {{ with .Params.tags }}
          <div class="chips">
            {{ range . }}
              <a class="chip" href="/tags/{{ . | urlize }}/">{{ . }}</a>
            {{ end }}
          </div>
        {{ end }}
      </div>

      <div class="no-print" style="display:flex; gap:10px;">
        <button class="accent" type="button" onclick="window.print()">Print</button>
        <a class="btn secondary" href="/recipes/">Back</a>
      </div>
    </div>

    {{/* Image priority: images[0] -> image */}}
    {{ $img := "" }}
    {{ with .Params.images }}
      {{ if gt (len .) 0 }}{{ $img = index . 0 }}{{ end }}
    {{ end }}
    {{ if not $img }}
      {{ with .Params.image }}{{ $img = . }}{{ end }}
    {{ end }}

    {{ if $img }}
      <img class="recipe-photo" alt="{{ .Title }} image" src="{{ $img }}" loading="lazy" />
    {{ end }}

    <div class="card">
      {{ .Content }}
    </div>
  </div>
{{ end }}

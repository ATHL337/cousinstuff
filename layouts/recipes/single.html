{{ define "main" }}
  <div class="recipe-hero">
    <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap; align-items:flex-start;">
      <div>
        <h1 class="sr-only">{{ .Title }}</h1>
        {{ partial "vault_placard.html" . }}

        <div class="meta">
          {{ with .Params.servings }}<span>{{ . }} servings</span>{{ end }}

          {{ with .Params.prepTime }}
            <span>Prep: {{ partial "duration_label.html" . }}</span>
          {{ end }}

          {{ with .Params.totalTime }}
            <span>Total: {{ partial "duration_label.html" . }}</span>
          {{ end }}
        </div>

        {{ with .Params.tags }}
          <div class="chips">
            {{ range . }}
              <a class="chip" href="/tags/{{ . | urlize }}/">{{ . }}</a>
            {{ end }}
          </div>
        {{ end }}
      </div>

      <div class="no-print" style="display:flex; gap:10px;">
        <button class="accent" type="button" onclick="window.print()">Print</button>
        <a class="btn secondary" href="/recipes/">Back</a>
      </div>
    </div>

	{{/* Hero image priority: image -> images[0] */}}
	{{ $hero := "" }}

	{{ with .Params.image }}
	  {{ $hero = . }}
	{{ end }}

	{{ if not $hero }}
	  {{ with .Params.images }}
		{{ if gt (len .) 0 }}
		  {{ $hero = index . 0 }}
		{{ end }}
	  {{ end }}
	{{ end }}

	{{ if $hero }}
	  <img
		class="recipe-photo"
		alt="{{ .Title }}"
		src="{{ $hero | relURL }}"
		loading="lazy"
		decoding="async"
	  />
	{{ end }}


    <div class="card">
      {{ .Content }}
    </div>
  </div>
{{ end }}

{{/* layouts/partials/rads-badge.html
   Accepts either:
   - a dict: {score, tier}
   - a Page: compute RADS from data/rads_votes.yaml using slug
*/}}

{{- $in := . -}}
{{- $r := dict -}}

{{- if kindIs "map" $in -}}
  {{- $r = $in -}}
{{- else -}}
  {{- /* assume Page */ -}}
  {{- $slug := $in.Params.slug | default $in.File.TranslationBaseName -}}
  {{- $r = partial "rads-score.html" (dict "slug" $slug "site" $in.Site) -}}
{{- end -}}

{{- $tier := (index $r "tier") | default "unscored" -}}
{{- $score := (index $r "score") | default 0 -}}

<span class="rads-badge rads-tier-{{ $tier }}">
  <span class="rads-label">RADS</span>
  <span class="rads-score">{{ $score }}</span>
  <span class="rads-tier">{{ $tier }}</span>
</span>

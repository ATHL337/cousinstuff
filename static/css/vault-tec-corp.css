/* CousinStuff â€” Vault-Tec corporate inspired (clean, blue/yellow, poster-like)
   No copyrighted assets. Pure CSS/typography/layout language.
   ========================================= */

/* ================================
   Global Tokens / Theme Overrides
   ================================ */

:root{
  --vt-blue:#0b3a78;
  --vt-blue-2:#082a57;
  --vt-yellow:#f2c230;
  --vt-yellow-2:#d8a50f;
  --paper:#fbf7ea;

  --bg:var(--paper);
  --fg:#0b1020;
  --muted:#4b5563;
  --card:#ffffff;
  --border:#e6dcc1;
  --link:var(--vt-blue);

  --chip:#fff1c4;
  --chip-fg:#1f2937;

  --btn:var(--vt-blue);
  --btn-fg:#ffffff;

  --radius:18px;
  --shadow:0 14px 32px rgba(11,58,120,0.10);

  /* Mobile layout system knobs */
  --vt-mobile-header-h: 86px; /* reserved header height for sticky filters */
  --vt-mobile-gap: 10px;
  --vt-z-header: 100;
  --vt-z-filters: 90;
  --vt-z-bottombar: 80;
}

:root[data-theme="dark"]{
  --bg:#061226;
  --fg:#f8fafc;
  --muted:#cbd5e1;
  --card:#0b1e3c;
  --border:#12315d;
  --link:#8bb7ff;

  --chip:#0f2a52;
  --chip-fg:#e5e7eb;

  --btn:var(--vt-blue);
  --btn-fg:#ffffff;

  --shadow:0 14px 32px rgba(0,0,0,0.35);
}

/* Accent button */
.btn.accent, button.accent{
  background:var(--vt-yellow);
  color:#0b1020;
  border-color:rgba(216,165,15,0.65);
}

/* ================================
   Background / Page Feel
   ================================ */

body{
  background:
    radial-gradient(1100px 650px at 18% 10%, rgba(242,194,48,0.22), transparent 58%),
    radial-gradient(950px 560px at 86% 0%, rgba(11,58,120,0.22), transparent 58%),
    linear-gradient(180deg, rgba(11,58,120,0.04), transparent 40%),
    var(--bg);
  background-repeat:no-repeat;
  background-size:cover;
  background-position:center top;
  background-attachment:fixed;
}

/* Mobile Safari jitter fix */
@media (max-width: 720px){
  body{ background-attachment:scroll; }
}

/* ================================
   Header / Nav (desktop + shared)
   ================================ */

.nav{
  border-bottom:0;                 /* override base */
  padding:16px 0 18px;
  position:relative;
}

/* Poster stripe */
.nav::after{
  content:"";
  position:absolute;
  left:0; right:0; bottom:-1px;
  height:6px;
  border-radius:999px;
  background:linear-gradient(90deg,var(--vt-blue) 0%,var(--vt-blue) 55%,var(--vt-yellow) 100%);
  opacity:0.95;
}

.brand{ gap:12px; }
.brand .title{
  font-weight:950;
  letter-spacing:0.8px;
  text-transform:uppercase;
  color:var(--vt-blue);
}
:root[data-theme="dark"] .brand .title{ color:var(--vt-yellow); }
.brand .tagline{
  color:var(--muted);
  font-weight:600;
}

/* Optional: compact mode driven by nav-compact.js */
@media (max-width: 720px){
  .nav.is-compact{ padding: 8px 0 10px; }
  .nav.is-compact::after{ height: 4px; }
}

/* ================================
   Core Components (theme polish)
   ================================ */

.card{
  border:2px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
}

button, .btn{
  border:2px solid var(--border);
  border-radius:999px;
  padding:9px 14px;
  font-weight:800;
  letter-spacing:0.2px;
  box-shadow:0 10px 18px rgba(0,0,0,0.08);
  transition:transform 0.05s ease, filter 0.15s ease;
}
button:hover, .btn:hover{ filter:brightness(1.04); }
button:active, .btn:active{ transform:translateY(1px); }

.btn.secondary, button.secondary{
  background:transparent;
  color:var(--fg);
}

.chip{
  border:2px solid var(--border);
  border-radius:999px;
  background:var(--chip);
  font-weight:800;
}

a{ text-decoration-thickness:2px; text-underline-offset:3px; }

input[type="search"]{
  border:2px solid var(--border);
  border-radius:999px;
  padding:12px 14px;
  background:rgba(255,255,255,0.55);
}
:root[data-theme="dark"] input[type="search"]{
  background:rgba(0,0,0,0.15);
}

h1{
  text-transform:uppercase;
  letter-spacing:0.9px;
}

.recipe-photo{
  border:2px solid var(--border);
  box-shadow:var(--shadow);
}

/* ================================
   Vault Placard / Capacity
   ================================ */

.vt-placard{
  border:2px solid var(--border);
  border-radius:var(--radius);
  background:rgba(255,255,255,0.70);
  box-shadow:var(--shadow);
  padding:14px 14px 12px;
  margin:10px 0 16px;
  text-align:left;
}
:root[data-theme="dark"] .vt-placard{ background:rgba(0,0,0,0.18); }

.vt-capacity{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:10px 12px;
  border-radius:999px;
  border:2px solid var(--border);
  background:rgba(255,255,255,0.55);
  box-shadow:0 10px 18px rgba(0,0,0,0.06);
  font-weight:900;
  letter-spacing:0.04em;
  text-transform:uppercase;
  font-size:12px;
}
:root[data-theme="dark"] .vt-capacity{ background:rgba(0,0,0,0.18); }

/* ================================
   Registry Layout
   ================================ */

.vt-wrap{ max-width:1100px; margin:0 auto; padding:1.25rem; }
.vt-registry-header{ margin-bottom:1.25rem; }

.vt-title{
  margin:0;
  font-size:1.75rem;
  letter-spacing:0.06em;
  text-transform:uppercase;
  color:var(--vt-blue);
}
:root[data-theme="dark"] .vt-title{ color:var(--vt-yellow); }

.vt-subtitle{
  margin:0.25rem 0 0.6rem;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.03em;
  opacity:0.85;
}

/* Filters */
.vt-filters{
  display:flex;
  flex-wrap:wrap;
  gap:0.5rem;
  align-items:center;
  margin-top:0.25rem;
}
.vt-filters__spacer{ flex:1 1 auto; }

.vt-filter{
  border:2px solid var(--border);
  background:rgba(255,255,255,0.45);
  color:var(--fg);
  padding:10px 12px;
  border-radius:999px;
  cursor:pointer;
  font-weight:900;
  letter-spacing:0.02em;
  text-transform:uppercase;
  box-shadow:0 10px 18px rgba(0,0,0,0.06);
  min-height:44px;
}
:root[data-theme="dark"] .vt-filter{ background:rgba(0,0,0,0.18); }

.vt-filter.is-active{
  border-color:rgba(11,58,120,0.45);
  background:linear-gradient(90deg, rgba(11,58,120,0.12), rgba(242,194,48,0.14));
}
:root[data-theme="dark"] .vt-filter.is-active{
  border-color:rgba(242,194,48,0.55);
  background:linear-gradient(90deg, rgba(242,194,48,0.22), rgba(11,58,120,0.18));
}

/* Sections */
.vt-section{ margin-top:1.4rem; }

.vt-section__head{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:12px;
  padding:10px 12px;
  border-radius:16px;
  border:2px solid var(--border);
  background:rgba(255,255,255,0.55);
  box-shadow:0 10px 18px rgba(0,0,0,0.06);
  margin-bottom:10px;
}
:root[data-theme="dark"] .vt-section__head{ background:rgba(0,0,0,0.18); }

.vt-section__title{
  margin:0;
  font-size:1.05rem;
  letter-spacing:0.06em;
  text-transform:uppercase;
  font-weight:950;
  color:var(--vt-blue);
}
:root[data-theme="dark"] .vt-section__title{ color:var(--vt-yellow); }

.vt-section__range{
  opacity:0.85;
  font-weight:900;
  letter-spacing:0.04em;
  text-transform:uppercase;
  font-size:0.9rem;
}

/* Grid */
.vt-grid{
  display:grid;
  grid-template-columns:repeat(3, minmax(0, 1fr));
  gap:0.85rem;
}
@media (max-width: 980px){ .vt-grid{ grid-template-columns:repeat(2, minmax(0, 1fr)); } }
@media (max-width: 640px){ .vt-grid{ grid-template-columns:1fr; } }

/* Cards */
.vt-card{
  border:2px solid var(--border);
  border-radius:var(--radius);
  padding:0.95rem 0.9rem 0.85rem;
  background:rgba(255,255,255,0.78);
  box-shadow:var(--shadow);
  position:relative;
  padding-right:4.6rem;
}
:root[data-theme="dark"] .vt-card{ background:rgba(0,0,0,0.18); }

.vt-card__badge{
  position:absolute;
  top:0.7rem;
  right:0.7rem;
  font-weight:950;
  letter-spacing:0.06em;
  opacity:0.9;
  color:var(--vt-blue);
  max-width:3.6rem;
  text-align:right;
}
:root[data-theme="dark"] .vt-card__badge{ color:var(--vt-yellow); }

.vt-card__title{
  margin:0;
  font-size:1.05rem;
  font-weight:950;
  margin-right:3.6rem;
  line-height:1.22;
}
.vt-card__link{ text-decoration:none; }

.vt-card__subtitle{
  margin:0.4rem 0 0.6rem;
  opacity:0.9;
  font-weight:700;
}
.vt-card__meta{ margin:0; opacity:0.85; font-size:0.92rem; }
.vt-card__meta-sep{ margin:0 0.35rem; opacity:0.6; }

/* Clamp titles */
.vt-card__title,
.vt-card__link{
  display:-webkit-box;
  -webkit-line-clamp:2;
  line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
}

/* ================================
   Accessibility helper
   ================================ */

.sr-only{
  position:absolute !important;
  width:1px !important;
  height:1px !important;
  padding:0 !important;
  margin:-1px !important;
  overflow:hidden !important;
  clip:rect(0,0,0,0) !important;
  white-space:nowrap !important;
  border:0 !important;
}

/* ================================
   Print
   ================================ */

@media print{
  body{ background:#fff !important; }
  .card{ box-shadow:none; border:1px solid #ddd; }
  .nav::after{ display:none; }
  .vt-bottombar{ display:none !important; }
}

/* =========================================================
   MOBILE LAYOUT SYSTEM (single source of truth)
   - Sticky top header
   - Sticky filters below header (no overlap)
   - Bottom utility bar (enabled via vt-has-bottombar)
   ========================================================= */

body.vt-has-bottombar{
  padding-bottom: calc(84px + env(safe-area-inset-bottom));
}

@media (max-width: 720px){

  .container{
    margin:0 auto;
    padding-left:max(14px, env(safe-area-inset-left));
    padding-right:max(14px, env(safe-area-inset-right));
  }

  .vt-wrap{ padding-left:0; padding-right:0; }

  /* Sticky header */
  .nav{
    position:sticky;
    top:0;
    z-index:var(--vt-z-header);
    background:rgba(255,255,255,0.78);
    backdrop-filter:blur(10px);

    display:grid;
    grid-template-columns:1fr;
    gap:10px;
    padding:10px 0 12px;
  }
  :root[data-theme="dark"] .nav{ background:rgba(6,18,38,0.78); }

  .nav::after{ height:4px; }

  .brand{
    display:grid;
    gap:4px;
    align-items:start;
  }
  .brand .title{ font-size:1.1rem; line-height:1.05; }

  /* Default: hide tagline on mobile (keeps header height stable) */
  .brand .tagline{ display:none; }

  /* Top actions (nav links) */
  .actions{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:10px;
    width:100%;
    align-items:stretch;
  }
  .actions a.btn,
  .actions button{
    width:100%;
    min-height:44px;
    text-align:center;
    justify-content:center;
  }

  /* Sticky registry filters sit below header */
  .vt-filters{
    position:sticky;
    top: calc(var(--vt-mobile-header-h) + var(--vt-mobile-gap));
    z-index: var(--vt-z-filters);

    padding:10px;
    border-radius:16px;
    background:rgba(255,255,255,0.72);
    border:2px solid var(--border);
    backdrop-filter:blur(8px);

    flex-wrap:nowrap;
    overflow-x:auto;
    -webkit-overflow-scrolling:touch;
  }
  :root[data-theme="dark"] .vt-filters{
    background:rgba(0,0,0,0.22);
    border-color:rgba(18,49,93,0.65);
  }

  .vt-filters__spacer{ display:none; }
  .vt-filter{ flex:0 0 auto; white-space:nowrap; min-height:44px; }

  /* Bottom bar */
  .vt-bottombar{ display:none; }

  body.vt-has-bottombar .vt-bottombar{
    display:block;
    position:fixed;
    left:0; right:0; bottom:0;
    z-index:var(--vt-z-bottombar);

    padding:
      10px max(14px, env(safe-area-inset-left))
      calc(10px + env(safe-area-inset-bottom))
      max(14px, env(safe-area-inset-right));

    background: linear-gradient(180deg, transparent, rgba(0,0,0,0.24));
    pointer-events:none;
  }

  body.vt-has-bottombar .vt-bottombar__inner{
    pointer-events:auto;
    display:grid;
    grid-template-columns: 1fr auto auto;
    gap:10px;
    align-items:center;

    border-radius:18px;
    border:2px solid rgba(255,255,255,0.16);
    background:rgba(6,18,38,0.82);
    backdrop-filter:blur(10px);
    box-shadow:0 16px 36px rgba(0,0,0,0.38);
    padding:10px;
  }

  :root:not([data-theme="dark"]) body.vt-has-bottombar .vt-bottombar__inner{
    background:rgba(255,255,255,0.86);
    border-color:rgba(11,58,120,0.18);
  }

  body.vt-has-bottombar .vt-bottombar .vt-capacity{
    margin:0 !important;
    width:100%;
    padding:8px 10px;
    border-radius:14px;
  }

  body.vt-has-bottombar .vt-bottombar__inner .btn,
  body.vt-has-bottombar .vt-bottombar__inner button{
    min-height:42px;
    padding:8px 12px;
    border-radius:999px;
    white-space:nowrap;
  }

  body.vt-has-bottombar .vt-bottombar__random{
    background: linear-gradient(90deg, var(--vt-blue) 0%, var(--vt-blue) 65%, var(--vt-yellow) 100%);
    color:#fff;
    border-color:rgba(11,58,120,0.35);
    font-weight:950;
    letter-spacing:0.02em;
    text-transform:uppercase;
  }
  :root[data-theme="dark"] body.vt-has-bottombar .vt-bottombar__random{
    background: linear-gradient(90deg, var(--vt-yellow) 0%, var(--vt-yellow) 40%, var(--vt-blue) 100%);
    color:#0b1020;
    border-color:rgba(242,194,48,0.5);
  }
}

@media (max-width: 420px){
  body.vt-has-bottombar .vt-bottombar__inner{
    grid-template-columns:1fr 1fr;
  }
  body.vt-has-bottombar .vt-bottombar .vt-capacity{ grid-column:1 / -1; }
  body.vt-has-bottombar .vt-bottombar__random{ grid-column:1 / -1; }
}
